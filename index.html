<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>H√≥a ƒê∆°n</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
      color: #333;
    }

    .invoice-container {
      background: #fff;
      width: 80mm;
      margin: auto;
      padding: 20px;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
      border-radius: 8px;
    }

    h2, h3 {
      text-align: center;
      margin: 5px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      padding: 6px;
      font-size: 14px;
    }

    th {
      background: #ddd;
    }

    tr:nth-child(even) {
      background: #f9f9f9;
    }

    .input-row td {
      vertical-align: middle;
    }

    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 4px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .delete-btn {
      background: #ff4d4d;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 4px 8px;
      cursor: pointer;
    }

    .delete-btn:hover {
      background: #d93636;
    }

    .btn {
      margin-top: 10px;
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      background-color: #444;
      color: white;
      cursor: pointer;
    }

    .btn:hover {
      background-color: #222;
    }

    .total {
      font-weight: bold;
      text-align: right;
      margin-top: 10px;
    }

    .footer {
      text-align: center;
      font-size: 12px;
      margin-top: 20px;
    }

    .no-print {
      margin-top: 20px;
      text-align: center;
    }

    @media print {
      .no-print {
        display: none;
      }
      body {
        background: white;
      }
    }
  </style>
</head>
<body>

<div class="no-print">
  <h3>üìù Nh·∫≠p th√¥ng tin h√≥a ƒë∆°n</h3>
  <label>H·ªç t√™n kh√°ch h√†ng: <input type="text" id="customerName" placeholder="Nguy·ªÖn VƒÉn A"></label><br><br>

  <table id="inputTable">
    <thead>
      <tr>
        <th>S·∫£n ph·∫©m</th>
        <th>S·ªë </th>
        <th>ƒê∆°n gi√°</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr class="input-row">
        <td><input type="text" placeholder="T√™n s·∫£n ph·∫©m"></td>
        <td><input type="number" placeholder="1" min="1"></td>
        <td><input type="number" placeholder="0" min="0"></td>
        <td><button class="delete-btn" onclick="deleteRow(this)">‚ùå</button></td>
      </tr>
    </tbody>
  </table>

  <button class="btn" onclick="addRow()">+ Th√™m d√≤ng</button>
  <button class="btn" onclick="generateInvoice()">T·∫°o h√≥a ƒë∆°n</button>
</div>

<div class="invoice-container" id="invoice" style="display:none;">
  <h2>‚òï C·ª≠a H√†ng  Nh·∫≠t T√¢n </h2>
  <h3>H√ìA ƒê∆†N THANH TO√ÅN</h3>
  <p><strong>Kh√°ch h√†ng:</strong> <span id="nameDisplay"></span><br>
     <strong>Ng√†y gi·ªù:</strong> <span id="dateTime"></span></p>

  <table id="invoiceTable">
    <thead>
      <tr>
        <th>S·∫£n ph·∫©m</th>
        <th>SL</th>
        <th>ƒê∆°n gi√°</th>
        <th>Th√†nh ti·ªÅn</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <p class="total">T·ªïng c·ªông: <span id="totalAmount"></span>ƒë</p>

  <div class="footer">
    C·∫£m ∆°n qu√Ω kh√°ch!<br>
    Hotline: 0559.123*###
  </div>
</div>

<div class="no-print">
  <button class="btn" onclick="window.print()">üñ®Ô∏è In h√≥a ƒë∆°n</button>
</div>

<script>
  function addRow() {
    const tableBody = document.querySelector("#inputTable tbody");
    const row = document.createElement("tr");
    row.classList.add("input-row");
    row.innerHTML = `
      <td><input type="text" placeholder="T√™n s·∫£n ph·∫©m"></td>
      <td><input type="number" placeholder="1" min="1"></td>
      <td><input type="number" placeholder="0" min="0"></td>
      <td><button class="delete-btn" onclick="deleteRow(this)">‚ùå</button></td>
    `;
    tableBody.appendChild(row);
  }

  function deleteRow(btn) {
    const row = btn.closest("tr");
    row.remove();
  }

  function generateInvoice() {
    const invoice = document.getElementById("invoice");
    const tbody = document.querySelector("#invoiceTable tbody");
    const name = document.getElementById("customerName").value || "Kh√°ch kh√¥ng t√™n";
    const now = new Date();
    const dateStr = now.toLocaleString('vi-VN');

    tbody.innerHTML = "";
    let total = 0;

    const rows = document.querySelectorAll("#inputTable tbody tr");
    rows.forEach(row => {
      const inputs = row.querySelectorAll("input");
      const productName = inputs[0].value.trim();
      const qty = parseInt(inputs[1].value) || 0;
      const price = parseInt(inputs[2].value) || 0;

      if (!productName || qty <= 0 || price < 0) return;

      const amount = qty * price;
      total += amount;

      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${productName}</td>
        <td>${qty}</td>
        <td>${price.toLocaleString()}ƒë</td>
        <td>${amount.toLocaleString()}ƒë</td>
      `;
      tbody.appendChild(tr);
    });

    document.getElementById("nameDisplay").innerText = name;
    document.getElementById("dateTime").innerText = dateStr;
    document.getElementById("totalAmount").innerText = total.toLocaleString();

    invoice.style.display = "block";
    window.scrollTo(0, document.body.scrollHeight);
  }
</script>

</body>
</html>
